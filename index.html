<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pagina di poesie di La Penna di Calliope">
    <meta name="keywords" content="poesie, La Penna di Calliope, invia poesia">
    <meta name="author" content="La Penna di Calliope">
    <title>Poesie - La Penna di Calliope</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* CSS di base */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
        }

        header {
            background-color: #4CAF50;
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 a {
            color: white;
            text-decoration: none;
        }

        nav {
            text-align: center;
            margin-top: 10px;
        }

        nav ul {
            list-style: none;
            padding: 0;
        }

        nav ul li {
            display: inline;
            margin: 0 10px;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: bold;
        }

        main {
            padding: 20px;
        }

        .contact-form input,
        .contact-form textarea,
        .contact-form button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            font-size: 1rem;
        }

        .contact-form button {
            background-color: #4CAF50;
            color: white;
            border: none;
        }

        .content-section {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }

        .content-section h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        .article-card {
            background-color: #f4f4f4;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
        }

        .article-date {
            font-size: 0.9rem;
            color: #888;
        }

        .article-card h3 {
            font-size: 1.5rem;
            margin-top: 10px;
        }

        .article-card p {
            font-size: 1rem;
            margin-top: 10px;
        }

        footer {
            background-color: #4CAF50;
            color: white;
            padding: 10px 0;
            text-align: center;
        }

        .social-links a {
            margin: 0 10px;
            color: white;
            font-size: 1.5rem;
            text-decoration: none;
        }

        .social-links a:hover {
            color: #f1f1f1;
        }
    </style>
</head>

<body>

    <header>
        <h1 class="site-title"><a href="index.html">La Penna di Calliope</a></h1>
        <nav>
            <ul class="nav-desktop">
                <li><a href="index.html">Home</a></li>
                <li><a href="chi-siamo.html">Chi Siamo</a></li>
                <li><a href="eventi.html">Eventi</a></li>
                <li><a href="poesie.html">Poesie</a></li>
                <li><a href="contatti.html">Contatti</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="content-section" id="poesie">
            <h2>Poesie</h2>
            <p>Invia la tua poesia! Raccontaci le tue emozioni e lasciaci il tuo nome per condividerla con il mondo.</p>
            <div class="contact-form">
                <h2>Invia la tua poesia</h2>
                <form id="poesiaForm">
                    <input type="text" id="nome" name="nome" placeholder="Il tuo nome" required>
                    <input type="email" id="email" name="email" placeholder="La tua email" required>
                    <textarea id="poesia" name="poesia" placeholder="Scrivi la tua poesia" required></textarea>
                    <button type="submit">Invia</button>
                </form>
            </div>

            <h3>Poesie inviate</h3>
            <div id="poesie-accettate">
                <!-- Qui verranno caricate le poesie inviate -->
            </div>
        </section>
    </main>

    <footer>
        <div class="social-links">
            <a href="https://chat.whatsapp.com/EaWRHGp9gHNJevkrgZn2ca" title="WhatsApp" target="_blank"><i class="fab fa-whatsapp"></i></a>
            <a href="https://www.facebook.com/profile.php?id=61558745237938" title="Facebook" target="_blank"><i class="fab fa-facebook"></i></a>
            <a href="https://www.instagram.com/lapennadicalliope/" title="Instagram" target="_blank"><i class="fab fa-instagram"></i></a>
        </div>
        <p>&copy; 2025 La Penna di Calliope. Tutti i diritti riservati.</p>
    </footer>

    <script>
        // Gestione invio poesia
        document.getElementById('poesiaForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const poesia = document.getElementById('poesia').value;

            // Invia la richiesta al server
            fetch('/submit-poesia', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ nome, email, poesia }),
            })
                .then((response) => response.json())
                .then((data) => {
                    if (data.success) {
                        alert('La tua poesia è stata inviata con successo!');
                        loadPoesieAccettate();
                    } else {
                        alert('Si è verificato un errore durante l\'invio della poesia.');
                    }
                });
        });

        // Carica poesie accettate
        function loadPoesieAccettate() {
            fetch('/get-poesie')
                .then((response) => response.json())
                .then((data) => {
                    const poesieContainer = document.getElementById('poesie-accettate');
                    poesieContainer.innerHTML = '';
                    data.poesie.forEach((poesia) => {
                        const poesiaCard = document.createElement('div');
                        poesiaCard.className = 'article-card';
                        poesiaCard.innerHTML = `
                            <div class="article-date">${poesia.date}</div>
                            <h3>${poesia.nome}</h3>
                            <p>${poesia.poesia}</p>
                        `;
                        poesieContainer.appendChild(poesiaCard);
                    });
                });
        }

        document.addEventListener('DOMContentLoaded', loadPoesieAccettate);
    </script>
</body>

</html>
